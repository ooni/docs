{"openapi": "3.1.0", "info": {"title": "OONI Run", "version": "0.7.0"}, "paths": {"/api/v2/oonirun/links": {"post": {"tags": ["oonirun"], "summary": "Create Oonirun Link", "description": "Create a new oonirun link or a new version for an existing one.", "operationId": "create_oonirun_link_api_v2_oonirun_links_post", "parameters": [{"name": "authorization", "in": "header", "required": false, "schema": {"type": "string", "default": "authorization", "title": "Authorization"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLinkCreateEdit"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLink"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "get": {"tags": ["oonirun"], "summary": "List Oonirun Links", "description": "List OONIRun descriptors", "operationId": "list_oonirun_links_api_v2_oonirun_links_get", "parameters": [{"name": "is_mine", "in": "query", "required": false, "schema": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "description": "List only the my descriptors", "title": "Is Mine"}, "description": "List only the my descriptors"}, {"name": "is_expired", "in": "query", "required": false, "schema": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "description": "List also expired descriptors", "title": "Is Expired"}, "description": "List also expired descriptors"}, {"name": "authorization", "in": "header", "required": false, "schema": {"type": "string", "default": "authorization", "title": "Authorization"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLinkList"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v2/oonirun/links/{oonirun_link_id}": {"put": {"tags": ["oonirun"], "summary": "Edit Oonirun Link", "description": "Edit an existing OONI Run link", "operationId": "edit_oonirun_link_api_v2_oonirun_links__oonirun_link_id__put", "parameters": [{"name": "oonirun_link_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Oonirun Link Id"}}, {"name": "authorization", "in": "header", "required": false, "schema": {"type": "string", "default": "authorization", "title": "Authorization"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLinkCreateEdit"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLink"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "get": {"tags": ["oonirun"], "summary": "Get Latest Oonirun Link", "description": "Fetch OONIRun descriptor by creation time or the newest one", "operationId": "get_latest_oonirun_link_api_v2_oonirun_links__oonirun_link_id__get", "parameters": [{"name": "oonirun_link_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Oonirun Link Id"}}, {"name": "authorization", "in": "header", "required": false, "schema": {"type": "string", "default": "authorization", "title": "Authorization"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLink"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v2/oonirun/links/{oonirun_link_id}/revisions": {"get": {"tags": ["oonirun"], "summary": "Get Oonirun Link Revisions", "description": "Obtain the list of revisions for a certain OONI Run link", "operationId": "get_oonirun_link_revisions_api_v2_oonirun_links__oonirun_link_id__revisions_get", "parameters": [{"name": "oonirun_link_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Oonirun Link Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLinkRevisions"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v2/oonirun/links/{oonirun_link_id}/engine-descriptor/{revision_number}": {"get": {"tags": ["oonirun"], "summary": "Get Oonirun Link Engine Descriptor", "description": "Fetch an OONI Run link by specifying the revision number", "operationId": "get_oonirun_link_engine_descriptor_api_v2_oonirun_links__oonirun_link_id__engine_descriptor__revision_number__get", "parameters": [{"name": "oonirun_link_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Oonirun Link Id"}}, {"name": "revision_number", "in": "path", "required": true, "schema": {"type": "string", "pattern": "^(latest|\\d+)$", "error_messages": {"regex": "invalid revision number specified, must be 'latest' or a number"}, "title": "Revision Number"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLinkEngineDescriptor"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v2/oonirun/links/{oonirun_link_id}/full-descriptor/{revision_number}": {"get": {"tags": ["oonirun"], "summary": "Get Oonirun Link Revision", "description": "Fetch an OONI Run link by specifying the revision number", "operationId": "get_oonirun_link_revision_api_v2_oonirun_links__oonirun_link_id__full_descriptor__revision_number__get", "parameters": [{"name": "oonirun_link_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Oonirun Link Id"}}, {"name": "revision_number", "in": "path", "required": true, "schema": {"type": "string", "pattern": "^(latest|\\d+)$", "error_messages": {"regex": "invalid revision number specified, must be 'latest' or a number"}, "title": "Revision Number"}}, {"name": "authorization", "in": "header", "required": false, "schema": {"type": "string", "default": "authorization", "title": "Authorization"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OONIRunLink"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/version": {"get": {"summary": "Version", "operationId": "version_version_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/health": {"get": {"summary": "Health", "operationId": "health_health_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/": {"get": {"summary": "Root", "operationId": "root__get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}}, "components": {"schemas": {"HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "OONIRunLink": {"properties": {"name": {"type": "string", "maxLength": 50, "minLength": 2, "title": "name of the ooni run link"}, "short_description": {"type": "string", "maxLength": 200, "minLength": 2, "title": "short description of the ooni run link"}, "description": {"type": "string", "minLength": 2, "title": "full description of the ooni run link"}, "author": {"type": "string", "maxLength": 100, "minLength": 2, "title": "public email address of the author name of the ooni run link"}, "nettests": {"items": {"$ref": "#/components/schemas/OONIRunLinkNettest"}, "type": "array", "title": "Nettests"}, "name_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Name Intl", "description": "name of the ooni run link in different languages"}, "short_description_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Short Description Intl", "description": "short description of the ooni run link in different languages"}, "description_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Description Intl", "description": "full description of the ooni run link in different languages"}, "icon": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Icon", "description": "icon to use for the ooni run link"}, "color": {"anyOf": [{"type": "string", "pattern": "^#(?:[0-9a-fA-F]{6})$"}, {"type": "null"}], "title": "Color", "description": "color to use for the ooni run link as a hex value prefixed with #"}, "expiration_date": {"type": "string", "format": "date-time", "title": "Expiration Date", "description": "future time after which the ooni run link will be considered expired and no longer editable or usable (defaults to 6 months from now)"}, "oonirun_link_id": {"type": "string", "title": "Oonirun Link Id"}, "date_created": {"type": "string", "format": "date-time", "title": "Date Created", "description": "time when the ooni run link was created"}, "date_updated": {"type": "string", "format": "date-time", "title": "Date Updated", "description": "time when the ooni run nettest was last updated"}, "revision": {"type": "string", "title": "Revision", "description": "incremental number indicating the revision number of the ooni run link (the first revision is 1)"}, "is_mine": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Is Mine", "description": "flag indiciating indicating if the ooni run link was created by the current user", "default": false}, "is_expired": {"type": "boolean", "title": "Is Expired", "description": "flag indicating if the ooni run link is expired (see the expiration_date field for more information)", "readOnly": true}}, "type": "object", "required": ["name", "short_description", "description", "author", "nettests", "oonirun_link_id", "date_created", "date_updated", "revision", "is_expired"], "title": "OONIRunLink"}, "OONIRunLinkCreateEdit": {"properties": {"name": {"type": "string", "maxLength": 50, "minLength": 2, "title": "name of the ooni run link"}, "short_description": {"type": "string", "maxLength": 200, "minLength": 2, "title": "short description of the ooni run link"}, "description": {"type": "string", "minLength": 2, "title": "full description of the ooni run link"}, "author": {"type": "string", "maxLength": 100, "minLength": 2, "title": "public email address of the author name of the ooni run link"}, "nettests": {"items": {"$ref": "#/components/schemas/OONIRunLinkNettest"}, "type": "array", "title": "Nettests"}, "name_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Name Intl", "description": "name of the ooni run link in different languages"}, "short_description_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Short Description Intl", "description": "short description of the ooni run link in different languages"}, "description_intl": {"anyOf": [{"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Description Intl", "description": "full description of the ooni run link in different languages"}, "icon": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Icon", "description": "icon to use for the ooni run link"}, "color": {"anyOf": [{"type": "string", "pattern": "^#(?:[0-9a-fA-F]{6})$"}, {"type": "null"}], "title": "Color", "description": "color to use for the ooni run link as a hex value prefixed with #"}, "expiration_date": {"type": "string", "format": "date-time", "title": "Expiration Date", "description": "future time after which the ooni run link will be considered expired and no longer editable or usable (defaults to 6 months from now)"}}, "type": "object", "required": ["name", "short_description", "description", "author", "nettests"], "title": "OONIRunLinkCreateEdit"}, "OONIRunLinkEngineDescriptor": {"properties": {"revision": {"type": "string", "title": "revision of the nettest descriptor"}, "nettests": {"items": {"$ref": "#/components/schemas/OONIRunLinkNettest"}, "type": "array", "title": "list of nettests", "default": []}, "date_created": {"type": "string", "format": "date-time", "title": "date when the nettest list was created"}}, "type": "object", "required": ["revision", "date_created"], "title": "OONIRunLinkEngineDescriptor"}, "OONIRunLinkList": {"properties": {"oonirun_links": {"items": {"$ref": "#/components/schemas/OONIRunLink"}, "type": "array", "title": "Oonirun Links"}}, "type": "object", "required": ["oonirun_links"], "title": "OONIRunLinkList"}, "OONIRunLinkNettest": {"properties": {"test_name": {"type": "string", "maxLength": 100, "minLength": 2, "title": "name of the ooni nettest", "default": ""}, "inputs": {"items": {"type": "string"}, "type": "array", "title": "list of input dictionaries for the nettest", "default": []}, "options": {"type": "object", "title": "options for the nettest", "default": {}}, "backend_options": {"type": "object", "title": "options to send to the backend", "default": {}}, "is_background_run_enabled_default": {"type": "boolean", "title": "if this test should be enabled by default for background runs", "default": false}, "is_manual_run_enabled_default": {"type": "boolean", "title": "if this test should be enabled by default for manual runs", "default": false}}, "type": "object", "title": "OONIRunLinkNettest"}, "OONIRunLinkRevisions": {"properties": {"revisions": {"items": {"type": "string"}, "type": "array", "title": "Revisions"}}, "type": "object", "required": ["revisions"], "title": "OONIRunLinkRevisions"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}}}
